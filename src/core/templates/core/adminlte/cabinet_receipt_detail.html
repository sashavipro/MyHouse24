{% extends 'core/adminlte/cabinet_layout.html' %}

{% block title %}
  Просмотр квитанции: #{{ receipt.number }}
{% endblock title %}
{% block styles %}
  {{ block.super }}
  <style>
    .th-counter {
      width: 50px;
    }
  </style>
{% endblock styles %}
{% block content %}
  <section class="content-header">
    <div class="container-fluid">
      <div class="d-flex justify-content-between align-items-center mb-2">
        <h1>Просмотр квитанции: #{{ receipt.number }}</h1>
        <a href="#" class="btn btn-outline-primary"><i class="bi bi-printer me-2"></i>Распечатать</a>
      </div>
      <ol class="breadcrumb float-sm-start">
        <li class="breadcrumb-item">
          <a href="{% url 'cabinet:cabinet' %}">Личный кабинет</a>
        </li>
        <li class="breadcrumb-item">
          <a href="{% url 'cabinet:cabinet_receipt_list' %}">Квитанции</a>
        </li>
        <li class="breadcrumb-item active">#{{ receipt.number }}</li>
      </ol>
    </div>
  </section>
  <section class="content">
    <div class="container-fluid">
      <div class="card">
        <div class="card-body">
          <div class="table-responsive">
            <table class="table">
              <thead>
                <tr>
                  <th class="th-counter">#</th>
                  <th>Услуга</th>
                  <th>Количество потребления (расход)</th>
                  <th>Ед. изм.</th>
                  <th>Цена за ед., грн</th>
                  <th class="text-end">Стоимость, грн</th>
                </tr>
              </thead>
              <tbody>
                {% for item in receipt_items %}
                  <tr>
                    <td>{{ forloop.counter }}</td>
                    <td>{{ item.service.name }}</td>
                    <td>{{ item.consumption|floatformat:3 }}</td>
                    <td>{{ item.service.unit.name }}</td>
                    <td>{{ item.price_per_unit|floatformat:2 }}</td>
                    <td class="text-end">{{ item.amount|floatformat:2 }}</td>
                  </tr>
                {% endfor %}
              </tbody>
              <tfoot>
                <tr>
                  <th colspan="5" class="text-end border-0 fs-5">Итого:</th>
                  <th class="text-end border-0 fs-5">{{ receipt.total_amount|floatformat:2 }}</th>
                </tr>
              </tfoot>
            </table>
          </div>
        </div>
        <div class="card-footer text-end">
          <a href="#" class="btn btn-warning">
            <i class="bi bi-file-earmark-excel me-2"></i>Скачать в PDF
          </a>
          <a href="#" class="btn btn-success ms-2"><i class="bi bi-credit-card me-2"></i>Оплатить</a>
        </div>
      </div>
    </div>
  </section>
{% endblock content %}
