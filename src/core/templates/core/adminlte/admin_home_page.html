{% extends 'core/adminlte/admin_layout.html' %}
{% load static %}

{% block title %}Редактирование главной страницы{% endblock %}

{% block content %}

<!-- Content Header (Page header) -->
<div class="content-header">
    <div class="container-fluid">
        <div class="row mb-2">
            <div class="col-sm-6">
                <h1 class="m-0">Редактирование страницы</h1>
            </div><!-- /.col -->
            <div class="col-sm-6">
                <ol class="breadcrumb float-sm-end">
                    <li class="breadcrumb-item"><a href="{% url 'core:admin_stats' %}">Главная</a></li>
                    <li class="breadcrumb-item active">Редактирование страницы</li>
                </ol>
            </div><!-- /.col -->
        </div><!-- /.row -->
    </div><!-- /.container-fluid -->
</div>
<!-- /.content-header -->


<!-- Main content -->
<section class="content">
    <div class="container-fluid">
        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Редактирование страницы "Главная"</h3>
                        <div class="card-tools">
                            <a href="#" class="btn btn-secondary btn-sm">
                                <span class="d-none d-sm-inline">Обновить robots и sitemap</span>
                                <i class="bi bi-arrow-clockwise d-sm-none" aria-hidden="true"></i>
                            </a>
                        </div>
                    </div>
                    <div class="card-body">
                        <form  action="{% url 'core:admin_home' %}" method="post" enctype="multipart/form-data">
                            {% csrf_token %}

                            <div class="card-header"><h3 class="card-title">Слайдер</h3></div>
                            <div class="card-body">
                                {{ slider_formset.management_form }} {# Обязательно для работы формсета #}
                                <div class="row">
                                    {% for form in slider_formset %}
                                    <div class="col-md-4">
                                        <h4>Слайд {{ forloop.counter }}</h4>
                                        {% if form.instance.image %}
                                            <img src="{{ form.instance.image.url }}" alt="Превью" class="img-fluid rounded mb-3">
                                        {% endif %}
                                        <div class="mb-3">
                                            <label class="form-label" for="{{ form.image.id_for_label }}">Рекомендуемый размер: (1920x800)</label>
                                            {{ form.image }}
                                            {{ form.image.errors }}
                                            {{ form.id }} {# Скрытое поле с ID объекта #}
                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>

                            <div class="card-header"><h3 class="card-title">Краткая информация</h3></div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <label class="form-label" for="{{ main_page_form.title.id_for_label }}">Заголовок</label>
                                    {{ main_page_form.title }}
                                    {{ main_page_form.title.errors }}
                                </div>
                                <div class="mb-3">
                                    <label class="form-label" for="{{ main_page_form.description.id_for_label }}">Краткий текст</label>
                                    {{ main_page_form.description }}
                                    {{ main_page_form.description.errors }}
                                </div>
                                <div class="form-check mb-3">
                                    {{ main_page_form.is_show_apps }}
                                    <label class="form-check-label" for="{{ main_page_form.is_show_apps.id_for_label }}">
                                        {{ main_page_form.is_show_apps.label }}
                                    </label>
                                    {{ main_page_form.is_show_apps.errors }}
                                </div>
                            </div>

                            <div class="card-header">
                                <h3 class="card-title">Рядом с нами</h3>
                            </div>
                            <div class="card-body">
                                {{ blocks_formset.management_form }} {# Обязательно для работы формсета #}
                                <div class="row">
                                    {% for form in blocks_formset %}
                                    <div class="col-md-6 col-lg-4">
                                        <h4>Блок {{ forloop.counter }}</h4>
                                        {% if form.instance.image %}
                                            <img src="{{ form.instance.image.url }}" alt="Превью" class="img-fluid rounded mb-3">
                                        {% endif %}
                                        <div class="mb-3">
                                            <label class="form-label" for="{{ form.image.id_for_label }}">Изображение (1000x600)</label>
                                            {{ form.image }}
                                            {{ form.image.errors }}
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label" for="{{ form.title.id_for_label }}">Заголовок блока</label>
                                            {{ form.title }}
                                            {{ form.title.errors }}
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label" for="{{ form.description.id_for_label }}">Описание</label>
                                            {{ form.description }}
                                            {{ form.description.errors }}
                                        </div>
                                         {{ form.id }} {# Скрытое поле с ID объекта #}
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>

                            <div class="card-header">
                                <h3 class="card-title">Настройки SEO</h3>
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <label class="form-label" for="{{ seo_form.title.id_for_label }}">Title</label>
                                    {{ seo_form.title }}
                                    {{ seo_form.title.errors }}
                                </div>
                                <div class="mb-3">
                                    <label class="form-label" for="{{ seo_form.description.id_for_label }}">Description</label>
                                    {{ seo_form.description }}
                                    {{ seo_form.description.errors }}
                                </div>
                                <div class="mb-3">
                                    <label class="form-label" for="{{ seo_form.keywords.id_for_label }}">Keywords</label>
                                    {{ seo_form.keywords }}
                                    {{ seo_form.keywords.errors }}
                                </div>
                            </div>

                            <div class="card-body text-center">
                                <a href="#" class="btn btn-secondary">Отменить</a>
                                <button type="submit" class="btn btn-success">Сохранить</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- /.content -->

{% endblock %}